/* esm.sh - esbuild bundle(@codemirror/lang-javascript@6.1.7) deno production */
import{parser as X}from"/v117/@lezer/javascript@1.4.3/deno/javascript.mjs";import{syntaxTree as $,LRLanguage as x,indentNodeProp as N,continuedIndent as h,flatIndent as P,delimitedIndent as L,foldNodeProp as A,foldInside as F,defineLanguageFacet as O,sublanguageProp as I,LanguageSupport as j}from"/v117/@codemirror/language@6.6.0/deno/language.mjs";import{EditorSelection as b}from"/v117/@codemirror/state@6.2.0/deno/state.mjs";import{EditorView as B}from"/v117/@codemirror/view@6.10.0/deno/view.mjs";import{snippetCompletion as c,ifNotIn as V,completeFromList as M}from"/v117/@codemirror/autocomplete@6.6.0/deno/autocomplete.mjs";import{NodeWeakMap as _,IterMode as R}from"/v117/@lezer/common@1.0.2/deno/common.mjs";var W=[c("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),c("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),c("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),c("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),c("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),c(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),c("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),c(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),c(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),c('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),c('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],k=new _,E=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function d(e){return(t,r)=>{let n=t.node.getChild("VariableDefinition");return n&&r(n,e),!0}}var H=["FunctionDeclaration"],Z={FunctionDeclaration:d("function"),ClassDeclaration:d("class"),ClassExpression:()=>!0,EnumDeclaration:d("constant"),TypeAliasDeclaration:d("type"),NamespaceDeclaration:d("namespace"),VariableDefinition(e,t){e.matchContext(H)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function D(e,t){let r=k.get(t);if(r)return r;let n=[],o=!0;function a(i,s){let l=e.sliceString(i.from,i.to);n.push({label:l,type:s})}return t.cursor(R.IncludeAnonymous).iterate(i=>{if(o)o=!1;else if(i.name){let s=Z[i.name];if(s&&s(i,a)||E.has(i.name))return!1}else if(i.to-i.from>8192){for(let s of D(e,i.node))n.push(s);return!1}}),k.set(t,n),n}var y=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,v=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function q(e){let t=$(e.state).resolveInner(e.pos,-1);if(v.indexOf(t.name)>-1)return null;let r=t.name=="VariableName"||t.to-t.from<20&&y.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let n=[];for(let o=t;o;o=o.parent)E.has(o.name)&&(n=n.concat(D(e.state.doc,o)));return{options:n,from:r?t.from:e.pos,validFor:y}}function S(e,t,r){var n;let o=[];for(;;){let a=t.firstChild,i;if(a?.name=="VariableName")return o.push(e(a)),{path:o.reverse(),name:r};if(a?.name=="MemberExpression"&&((n=i=a.lastChild)===null||n===void 0?void 0:n.name)=="PropertyName")o.push(e(i)),t=a;else return null}}function z(e){let t=n=>e.state.doc.sliceString(n.from,n.to),r=$(e.state).resolveInner(e.pos,-1);return r.name=="PropertyName"?S(t,r.parent,t(r)):v.indexOf(r.name)>-1?null:r.name=="VariableName"||r.to-r.from<20&&y.test(t(r))?{path:[],name:t(r)}:(r.name=="."||r.name=="?.")&&r.parent.name=="MemberExpression"?S(t,r.parent,""):r.name=="MemberExpression"?S(t,r,""):e.explicit?{path:[],name:""}:null}function G(e,t){let r=[],n=new Set;for(let o=0;;o++){for(let i of(Object.getOwnPropertyNames||Object.keys)(e)){if(n.has(i))continue;n.add(i);let s;try{s=e[i]}catch{continue}r.push({label:i,type:typeof s=="function"?/^[A-Z]/.test(i)?"class":t?"function":"method":t?"variable":"property",boost:-o})}let a=Object.getPrototypeOf(e);if(!a)return r;e=a}}function ue(e){let t=new Map;return r=>{let n=z(r);if(!n)return null;let o=e;for(let i of n.path)if(o=o[i],!o)return null;let a=t.get(o);return a||t.set(o,a=G(o,!n.path.length)),{from:r.pos-n.name.length,options:a,validFor:y}}}var p=x.define({name:"javascript",parser:X.configure({props:[N.add({IfStatement:h({except:/^\s*({|else\b)/}),TryStatement:h({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:P,SwitchBody:e=>{let t=e.textAfter,r=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(r?0:n?1:2)*e.unit},Block:L({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":h({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),A.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":F,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),J={test:e=>/^JSX/.test(e.name),facet:O({commentTokens:{block:{open:"{/*",close:"*/}"}}})},K=p.configure({dialect:"ts"},"typescript"),Q=p.configure({dialect:"jsx",props:[I.add(e=>e.isTop?[J]:void 0)]}),U=p.configure({dialect:"jsx ts",props:[I.add(e=>e.isTop?[J]:void 0)]},"typescript"),Y="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function pe(e={}){let t=e.jsx?e.typescript?U:Q:e.typescript?K:p;return new j(t,[p.data.of({autocomplete:V(v,M(W.concat(Y)))}),p.data.of({autocomplete:q}),e.jsx?re:[]])}function ee(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function C(e,t,r=e.length){for(let n=t?.firstChild;n;n=n.nextSibling)if(n.name=="JSXIdentifier"||n.name=="JSXBuiltin"||n.name=="JSXNamespacedName"||n.name=="JSXMemberExpression")return e.sliceString(n.from,Math.min(n.to,r));return""}function te(e){return e&&(e.name=="JSXEndTag"||e.name=="JSXSelfCloseEndTag")}var ne=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),re=B.inputHandler.of((e,t,r,n)=>{if((ne?e.composing:e.compositionStarted)||e.state.readOnly||t!=r||n!=">"&&n!="/"||!p.isActiveAt(e.state,t,-1))return!1;let{state:o}=e,a=o.changeByRange(i=>{var s;let{head:l}=i,f=$(o).resolveInner(l,-1),m;if(f.name=="JSXStartTag"&&(f=f.parent),!(f.name=="JSXAttributeValue"&&f.to>l)){if(n==">"&&f.name=="JSXFragmentTag")return{range:b.cursor(l+1),changes:{from:l,insert:"></>"}};if(n=="/"&&f.name=="JSXFragmentTag"){let u=f.parent,g=u?.parent;if(u.from==l-1&&((s=g.lastChild)===null||s===void 0?void 0:s.name)!="JSXEndTag"&&(m=C(o.doc,g?.firstChild,l))){let w=`/${m}>`;return{range:b.cursor(l+w.length),changes:{from:l,insert:w}}}}else if(n==">"){let u=ee(f);if(u&&!te(u.lastChild)&&o.sliceDoc(l,l+2)!="</"&&(m=C(o.doc,u,l)))return{range:b.cursor(l+1),changes:{from:l,insert:`></${m}>`}}}}return{range:i}});return a.changes.empty?!1:(e.dispatch(a,{userEvent:"input.type",scrollIntoView:!0}),!0)});function me(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach((r,n)=>{r.meta.docs.recommended&&(t.rules[n]=2)})),r=>{let{state:n}=r,o=[];for(let{from:a,to:i}of p.findRegions(n)){let s=n.doc.lineAt(a),l={line:s.number-1,col:a-s.from,pos:a};for(let f of e.verify(n.sliceDoc(a,i),t))o.push(oe(f,n.doc,l))}return o}}function T(e,t,r,n){return r.line(e+n.line).from+t+(e==1?n.col-1:-1)}function oe(e,t,r){let n=T(e.line,e.column,t,r),o={from:n,to:e.endLine!=null&&e.endColumn!=1?T(e.endLine,e.endColumn,t,r):n,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:e.severity==1?"warning":"error"};if(e.fix){let{range:a,text:i}=e.fix,s=a[0]+r.pos-n,l=a[1]+r.pos-n;o.actions=[{name:"fix",apply(f,m){f.dispatch({changes:{from:m+s,to:m+l,insert:i},scrollIntoView:!0})}}]}return o}export{re as autoCloseTags,z as completionPath,me as esLint,pe as javascript,p as javascriptLanguage,Q as jsxLanguage,q as localCompletionSource,ue as scopeCompletionSource,W as snippets,U as tsxLanguage,K as typescriptLanguage};
//# sourceMappingURL=lang-javascript.mjs.map