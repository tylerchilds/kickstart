/* esm.sh - esbuild bundle(@codemirror/lang-html@6.4.3) deno production */
import{parser as H,configureNesting as L}from"/v117/@lezer/html@1.3.4/deno/html.mjs";import{cssLanguage as q,css as U}from"/v117/@codemirror/lang-css@6.2.0/deno/lang-css.mjs";import{typescriptLanguage as W,jsxLanguage as J,tsxLanguage as K,javascriptLanguage as I,javascript as Q}from"/v117/@codemirror/lang-javascript@6.1.7/deno/lang-javascript.mjs";import{EditorView as X}from"/v117/@codemirror/view@6.10.0/deno/view.mjs";import{EditorSelection as j}from"/v117/@codemirror/state@6.2.0/deno/state.mjs";import{syntaxTree as _,LRLanguage as Y,indentNodeProp as Z,foldNodeProp as ee,bracketMatchingHandle as te,LanguageSupport as le}from"/v117/@codemirror/language@6.6.0/deno/language.mjs";var v=["_blank","_self","_top","_parent"],T=["ascii","utf-8","utf-16","latin1","latin1"],C=["get","post","put","delete"],x=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],m=["true","false"],t={},ae={a:{attrs:{href:null,ping:null,type:null,media:null,target:v,hreflang:null}},abbr:t,address:t,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:t,aside:t,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:t,base:{attrs:{href:null,target:v}},bdi:t,bdo:t,blockquote:{attrs:{cite:null}},body:t,br:t,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:x,formmethod:C,formnovalidate:["novalidate"],formtarget:v,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:t,center:t,cite:t,code:t,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:t,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:t,div:t,dl:t,dt:t,em:t,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:t,figure:t,footer:t,form:{attrs:{action:null,name:null,"accept-charset":T,autocomplete:["on","off"],enctype:x,method:C,novalidate:["novalidate"],target:v}},h1:t,h2:t,h3:t,h4:t,h5:t,h6:t,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:t,hgroup:t,hr:t,html:{attrs:{manifest:null}},i:t,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:x,formmethod:C,formnovalidate:["novalidate"],formtarget:v,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:t,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:t,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:t,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:T,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:t,noscript:t,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:t,param:{attrs:{name:null,value:null}},pre:t,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:t,rt:t,ruby:t,samp:t,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:T}},section:t,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:t,source:{attrs:{src:null,type:null,media:null}},span:t,strong:t,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:t,summary:t,sup:t,table:t,tbody:t,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:t,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:t,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:t,time:{attrs:{datetime:null}},title:t,tr:t,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:t,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:t},z={accesskey:null,class:null,contenteditable:m,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:m,autocorrect:m,autocapitalize:m,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":m,"aria-autocomplete":["inline","list","both","none"],"aria-busy":m,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":m,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":m,"aria-hidden":m,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":m,"aria-multiselectable":m,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":m,"aria-relevant":null,"aria-required":m,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},D="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let e of D)z[e]=null;var b=class{constructor(l,n){this.tags=Object.assign(Object.assign({},ae),l),this.globalAttrs=Object.assign(Object.assign({},z),n),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};b.default=new b;function y(e,l,n=e.length){if(!l)return"";let a=l.firstChild,s=a&&a.getChild("TagName");return s?e.sliceString(s.from,Math.min(s.to,n)):""}function k(e,l=!1){for(let n=e.parent;n;n=n.parent)if(n.name=="Element")if(l)l=!1;else return n;return null}function B(e,l,n){let a=n.tags[y(e,k(l,!0))];return a?.children||n.allTags}function A(e,l){let n=[];for(let a=l;a=k(a);){let s=y(e,a);if(s&&a.lastChild.name=="CloseTag")break;s&&n.indexOf(s)<0&&(l.name=="EndTag"||l.from>=a.firstChild.to)&&n.push(s)}return n}var F=/^[:\-\.\w\u00b7-\uffff]*$/;function O(e,l,n,a,s){let r=/\s*>/.test(e.sliceDoc(s,s+5))?"":">";return{from:a,to:s,options:B(e.doc,n,l).map(o=>({label:o,type:"type"})).concat(A(e.doc,n).map((o,d)=>({label:"/"+o,apply:"/"+o+r,type:"type",boost:99-d}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function $(e,l,n,a){let s=/\s*>/.test(e.sliceDoc(a,a+5))?"":">";return{from:n,to:a,options:A(e.doc,l).map((r,o)=>({label:r,apply:r+s,type:"type",boost:99-o})),validFor:F}}function ne(e,l,n,a){let s=[],r=0;for(let o of B(e.doc,n,l))s.push({label:"<"+o,type:"type"});for(let o of A(e.doc,n))s.push({label:"</"+o+">",type:"type",boost:99-r++});return{from:a,to:a,options:s,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function re(e,l,n,a,s){let r=k(n),o=r?l.tags[y(e.doc,r)]:null,d=o&&o.attrs?Object.keys(o.attrs):[],c=o&&o.globalAttrs===!1?d:d.length?d.concat(l.globalAttrNames):l.globalAttrNames;return{from:a,to:s,options:c.map(g=>({label:g,type:"property"})),validFor:F}}function se(e,l,n,a,s){var r;let o=(r=n.parent)===null||r===void 0?void 0:r.getChild("AttributeName"),d=[],c;if(o){let g=e.sliceDoc(o.from,o.to),u=l.globalAttrs[g];if(!u){let i=k(n),p=i?l.tags[y(e.doc,i)]:null;u=p?.attrs&&p.attrs[g]}if(u){let i=e.sliceDoc(a,s).toLowerCase(),p='"',f='"';/^['"]/.test(i)?(c=i[0]=='"'?/^[^"]*$/:/^[^']*$/,p="",f=e.sliceDoc(s,s+1)==i[0]?"":i[0],i=i.slice(1),a++):c=/^[^\s<>='"]*$/;for(let h of u)d.push({label:h,apply:p+h+f,type:"constant"})}}return{from:a,to:s,options:d,validFor:c}}function R(e,l){let{state:n,pos:a}=l,s=_(n).resolveInner(a),r=s.resolve(a,-1);for(let o=a,d;s==r&&(d=r.childBefore(o));){let c=d.lastChild;if(!c||!c.type.isError||c.from<c.to)break;s=r=d,o=c.from}return r.name=="TagName"?r.parent&&/CloseTag$/.test(r.parent.name)?$(n,r,r.from,a):O(n,e,r,r.from,a):r.name=="StartTag"?O(n,e,r,a,a):r.name=="StartCloseTag"||r.name=="IncompleteCloseTag"?$(n,r,a,a):l.explicit&&(r.name=="OpenTag"||r.name=="SelfClosingTag")||r.name=="AttributeName"?re(n,e,r,r.name=="AttributeName"?r.from:a,a):r.name=="Is"||r.name=="AttributeValue"||r.name=="UnquotedAttributeValue"?se(n,e,r,r.name=="Is"?a:r.from,a):l.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?ne(n,e,r,a):null}function ge(e){return R(b.default,e)}function oe(e){let{extraTags:l,extraGlobalAttributes:n}=e,a=n||l?new b(l,n):b.default;return s=>R(a,s)}var V=[{tag:"script",attrs:e=>e.type=="text/typescript"||e.lang=="ts",parser:W.parser},{tag:"script",attrs:e=>e.type=="text/babel"||e.type=="text/jsx",parser:J.parser},{tag:"script",attrs:e=>e.type=="text/typescript-jsx",parser:K.parser},{tag:"script",attrs(e){return!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type)},parser:I.parser},{tag:"style",attrs(e){return(!e.lang||e.lang=="css")&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type))},parser:q.parser}],M=[{name:"style",parser:q.parser.configure({top:"Styles"})}].concat(D.map(e=>({name:e,parser:I.parser}))),P=Y.define({name:"html",parser:H.configure({props:[Z.add({Element(e){let l=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+l[0].length?e.continue():e.lineIndent(e.node.from)+(l[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag"(e){return e.column(e.node.from)+e.unit},Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let l=null,n;for(let a=e.node;;){let s=a.lastChild;if(!s||s.name!="Element"||s.to!=a.to)break;l=a=s}return l&&!((n=l.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?e.lineIndent(l.from)+e.unit:null}}),ee.add({Element(e){let l=e.firstChild,n=e.lastChild;return!l||l.name!="OpenTag"?null:{from:l.to,to:n.name=="CloseTag"?n.from:e.to}}}),te.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),w=P.configure({wrap:L(V,M)});function he(e={}){let l="",n;e.matchClosingTags===!1&&(l="noMatch"),e.selfClosingTags===!0&&(l=(l?l+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(n=L((e.nestedLanguages||[]).concat(V),(e.nestedAttributes||[]).concat(M)));let a=n?P.configure({wrap:n,dialect:l}):l?w.configure({dialect:l}):w;return new le(a,[w.data.of({autocomplete:oe(e)}),e.autoCloseTags!==!1?ie:[],Q().support,U().support])}var E=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),ie=X.inputHandler.of((e,l,n,a)=>{if(e.composing||e.state.readOnly||l!=n||a!=">"&&a!="/"||!w.isActiveAt(e.state,l,-1))return!1;let{state:s}=e,r=s.changeByRange(o=>{var d,c,g;let{head:u}=o,i=_(s).resolveInner(u,-1),p;if((i.name=="TagName"||i.name=="StartTag")&&(i=i.parent),a==">"&&i.name=="OpenTag"){if(((c=(d=i.parent)===null||d===void 0?void 0:d.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(p=y(s.doc,i.parent,u))&&!E.has(p)){let f=e.state.doc.sliceString(u,u+1)===">",h=`${f?"":">"}</${p}>`;return{range:j.cursor(u+1),changes:{from:u+(f?1:0),insert:h}}}}else if(a=="/"&&i.name=="OpenTag"){let f=i.parent,h=f?.parent;if(f.from==u-1&&((g=h.lastChild)===null||g===void 0?void 0:g.name)!="CloseTag"&&(p=y(s.doc,h,u))&&!E.has(p)){let N=e.state.doc.sliceString(u,u+1)===">",S=`/${p}${N?"":">"}`,G=u+S.length+(N?1:0);return{range:j.cursor(G),changes:{from:u,insert:S}}}}return{range:o}});return r.changes.empty?!1:(e.dispatch(r,{userEvent:"input.type",scrollIntoView:!0}),!0)});export{ie as autoCloseTags,he as html,ge as htmlCompletionSource,oe as htmlCompletionSourceWith,w as htmlLanguage,P as htmlPlain};
//# sourceMappingURL=lang-html.mjs.map